function fcnen_revealTemplate(e){if(document.querySelectorAll(".fcnen-codemirror").forEach((e=>{e.closest(".fcnen-box__row").classList.add("hidden")})),!e)return fcnen_templatePreview(""),document.getElementById("fcnen-preview-notice").classList.remove("hidden"),void document.getElementById("fcnen-preview").classList.add("hidden");const t=document.getElementById(e);if(document.getElementById("fcnen-preview-notice").classList.add("hidden"),document.getElementById("fcnen-preview").classList.remove("hidden"),t)if(t.classList.remove("hidden"),t.querySelector(".CodeMirror")){fcnen_templatePreview(document.querySelector(".fcnen-template-wrapper:not(.hidden) .CodeMirror").CodeMirror.getValue())}else{wp.codeEditor.initialize(t.querySelector("textarea"),cm_settings);const e=document.querySelector(".fcnen-template-wrapper:not(.hidden) .CodeMirror").CodeMirror;fcnen_templatePreview(e.getValue()),e.on("change",(e=>{fcnen_templatePreview(e.doc.getValue())}))}}function fcnen_templatePreview(e,t=null){const n=document.getElementById("fcnen-preview-iframe"),c=n.contentWindow.document;c.open(),c.write(e),c.close(),n.style.height=0;const r=t??Math.max(c.body.scrollHeight,c.body.offsetHeight,c.documentElement.clientHeight,c.documentElement.scrollHeight,c.documentElement.offsetHeight);n.style.height=r+"px"}document.querySelectorAll(".fcnen-input-wrap._file").forEach((e=>{e.querySelector('input[type="file"]').addEventListener("change",(t=>{e.querySelector(".fcnen-input-wrap__file-field").textContent=t.currentTarget.files[0].name}))})),document.addEventListener("DOMContentLoaded",(()=>{document.getElementById("fcnen-select-template")?.addEventListener("change",(e=>{fcnen_revealTemplate(e.currentTarget.value)}))}));